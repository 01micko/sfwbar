.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "SFWBAR" 1 "" "" ""
.SH NAME
SFWBar \- Sway Floating Window taskBar
.SH SYNOPSIS
.nf
\fBsfwbar\fP [options]
.fi
.sp
.SH DESCRIPTION
.sp
\fBSFWBar\fP is a taskbar for wayland compositors. Originally written for Sway,
it should work with any compositor supporting layer\-shell protocol. SFWBar
assists in handling of floating windows on a wayland desktop. It provdes a
taskbar, a pager and a task switcher, a tray (using a status notifier item
protocol), implements a window placement policy and facilitates display of
data extracted from ssytem files using a set of widgets.
SFWBar can work with any wayland compositor supporting layer shell protocol,
but some functionality relies on presence of i3/sway IPC.
Taskbar and switcher require either sway or wlr\-foreign\-toplevel protocol
support. Placer and  pager require sway.
.SH USAGE
.sp
SFWBar executable can be invoked with the following options:
.INDENT 0.0
.TP
.B \-f | \-\-config
Specify a filename of a configuration file
.TP
.B \-c | \-\-css
Specify a filename of a css file
.TP
.B \-s | \-\-socket
Specify a location of sway ipc socket
.UNINDENT
.SH CONFIGURATION
.sp
SFWBar is configured via a config file  usually  sfwbar.config), the program
checks users XDG config directory (usually ~/.config/sfwbar/), followed by
/usr/share/sfwbar for the presence of the config file. Additionally, user can
specify a location of the config file via \fB\-f\fP command line option.
Appearance of the program can be further adjusted via CSS properties, these
are sourced either from a css section of the main configuration file or
from a file sfwbar.css located in the same directory as the config
file. The location of the css file can be also specifies via \fB\-c\fP option.
.sp
The config file consists of the following top level sections sections:
.SS Placer
.sp
Placer section enables intelligent placement of new floating windows. If
enabled the program will first attemp to place the window in a location, where
it won\(aqt overlap with other windows. If such location doesn\(aqt exist, the window
will be placed in a cascading pattern from top\-left to bottom\-right. The Placer
declaration accepts parameters "xstep" and "ystep" that specify the
steps in the window cascade. These are specified in percentage of the desktop
dimensions. The cascade placement will start at a location specified by "xorigin"
"yorigin" parameters. I.e.:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
placement {
  xorigin = 5
  yorigin = 5
  xstep = 5
  ystep = 5
  children = false
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
"children" parameter specifies if new windows opened by a program with other
windows already opened should be placed. These are usually dialog windows and
SFWBar won\(aqt place them by default. If the placer section is not present in
the file, SFWBar will let the compositor determine the locations for new windows.
.SS Task Switcher
.sp
Task switcher implements a keyboard shortcut to cycle focus across windows
(i.e. Alt\-Tab). The action is triggered upon receiving a change in a bar
hidden_state property or signal SIGUSR1. This can be configured in Sway, via
one of the following bindings:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
bindsym Alt\-Tab bar hidden_state toggle
or
bindsym Alt\-Tab exec killall \-SIGUSR1 sfwbar
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Task switcher is configured in the "switcher" section of the configuration file.
The following parameters are accepted:
.INDENT 0.0
.TP
.B interval
an timeout after the last task switch event after which the selected
window is activated
.TP
.B labels [true|false]
display window titles in the task list
.TP
.B icons [true|false]
display window icons in the task list
.TP
.B cols
a number of columns in the task list
.TP
.B css
css code applicable to the switcher window and any widgets in it. You can
also specify css code in the main CSS file. Using style name #switcher for
the task switcher window and the main grid and names #switcher_normal and
#switcher_active for inactive and active window representations respectively.
.UNINDENT
.SS Scanner
.sp
SFWBar displays the data it reads from various sources. These can be files or
output of commands.
.sp
Each source section contains one or more variables that SFWBar will poll
periodically and populate with the data parsed from the source. The sources
and variables linked to them as configured in the section \fBscanner\fP
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
scanner {
  file("/proc/swaps",NoGlob) {
    SwapTotal = RegEx("[\et ]([0\-9]+)")
    SwapUsed = RegEx("[\et ][0\-9]+[\et ]([0\-9]+)")
  }
  exec("getweather.sh") {
    $WeatherTemp = Json(".forecast.today.degrees")
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Each declaration within the \fBscanner\fP section specifies a source. This can
be either \fBfile\fP or \fBexec\fP specifying whether to read a file or output of
a command respectively. The first parameter of a \fBfile\fP source specifies a
file to read, for an \fBexec\fP source, this specifies command to run.
The file source also accepts further optional argumens specifying how
scanner should handle the source, these can be  :
.INDENT 0.0
.TP
.B NoGlob
specifies that SFWBar shouldn\(aqt attempt to expand the pattern in
the file name. If this flag is not specified, the file source will
attempt to read from all files matching a filename pattern.
.TP
.B CheckTime
indicates that the program should only update the variables from
this file when file modification date/time changes.
.UNINDENT
.sp
\fBVariables\fP are extracted from a file using parsers, currently the following
parsers are supported:
.INDENT 0.0
.TP
.B Grab([Aggregator])
specifies that the data is copied from the file verbatim
.TP
.B RegEx(Pattern[,Aggregator])
extracts data using a regular expression parser, the variable is assigned
data from the first capture buffer
.TP
.B Json(Path[,Aggregator])
extracts data from a json structure. The path starts with a separator
character, which is followed by a path with elements separated by the
same character. The path can contain numbers to indicate array indices.
I.e. ".data.node.1.string".
.UNINDENT
.sp
Optional aggregators specify how multiple occurences of numeric data are treated.
The following aggregators are supported:
.INDENT 0.0
.TP
.B First
Variable should be set to the first occurence of the pattern in the source
.TP
.B Last
Variable should be set to the last occurence of the pattern in the source
.TP
.B Sum
Variable should be set to the sum of all  occurences of the pattern in the
source
.TP
.B Product
Variable should be set to the product of all  occurences of the pattern in the
source
.UNINDENT
.sp
For string variables, Sum and Product aggregators are treated as Last.
.SS Layout
.sp
Defines the layout of the taskbar. The layout section contains a tree of
widgets. Widgets can be nested in case of a \fBgrid\fP widget,
which can be used as a container.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
layout {
  label {
  style = "mystyle"
  value = SwapUsed / SwapTotal + "%"
  loc(2,1,1,1)
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
External widgets can be included in layout using the following syntax:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
layout {
  include("MyWidget.widget")
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The above will include all scanner data and widget sub\-layout from file
MyWidget.widget
.sp
The following widget types are supported:
.INDENT 0.0
.TP
.B taskbar
a special widget displaying a list of all floating windows.
(requires a compositor supporting i3 ipc)
.TP
.B pager
a special widget displaying a list of all workspaces.
(requires a compositor supporting i3 ipc)
.TP
.B tray
a special widget displaying a list of tray icons received via
status notifier item interface
.TP
.B grid
a layout grid used to fine tune placement of widgets. You can use these to
further subdivide each cell of the main grid and arrange items therein.
.TP
.B label
a label displaying text (either static or sourced from scan variables).
.TP
.B scale
a progress bar with a progress value sourced from a scan variable
.TP
.B image
display an image from a file specified in "value" ( the image displayed can
change as the value changes)
.TP
.B button
add a clickable button with an option to launch external programs on click
.UNINDENT
.sp
Each widget is placed within the parent grid. By default, widgets are placed
next to the previous widget along the "direction" of the grid (left to right
by default). You can specify widget\(aqs  positions within a grid by using a
property "loc(x,y[,w,h])" with the first two parameters specifying the location
of the widget in the parent grid and the last two parameters specifying the
widget dimensions in grid cells.
.sp
In a grid widgets, child widget declarations can be placed immediately following
the parent grid properties. i.e.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
grid {
  css = "* { border: none }"

  label {
    ...
  }
}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Widgets can have the following properties:
.INDENT 0.0
.TP
.B value
an expression specifying the value to display. This can be a static value
i.e. "\(aqstring\(aq" or "1" or an expression, i.e. "\(aqValue is:\(aq+$MyString" or
"MyNumber.val" (see \fBexpressions\fP section for more detail)
.TP
.B style
assign a style to the widget. Styles can be used in CSS to theme widgets.
Multiple widgets can have the same style. A style name can be used in css
using gtk+ named widget convention, i.e. \fBlabel#mystyle\fP
.TP
.B interval
specify update frequency in milliseconds
.TP
.B css
specify additional css properties for the widget. These propertes will
only applyy for the widget in question.
.UNINDENT
.sp
\fBButton\fP widget may contain the following options
.INDENT 0.0
.TP
.B action
An action to execute upon a button click. Applicable to buttons only.
.TP
.B icon
An icon to display within the button
.UNINDENT
.sp
\fBTaskbar\fP widget may contain the following options
.INDENT 0.0
.TP
.B labels [true|false]
An indicator whether to display an application title within the taskbar.
.TP
.B icons [true|false]
An indicator whether to display application icons within the taskbar.
.TP
.B rows
Specify number of rows in a taskbar.
.TP
.B cols
Specify number of columns in a taskbar.
If both rows and cols are specified, rows will be used. If neither is
specified, the default is rows=1
.UNINDENT
.sp
\fBPager\fP widget may contain the following options
.INDENT 0.0
.TP
.B preview [true|false]
Specifies whether workspace previews are displayed on mouse hover over
pager buttons
.TP
.B pins
List "pinned" workspaces. These will show up in the pager even if the
workspace is empty.
.TP
.B rows
Specify number of rows in a pager.
.TP
.B cols
Specify number of columns in a pager.
If both rows and cols are specified, rows will be used. If neither is
specified, the default is rows=1
.UNINDENT
.SH EXPRESSIONS
.sp
Values in widgets can contain basic arithmetic and string manipulation
expressions. For numeric variables, the following operators are supported:
\fB+\fP, \fB\-\fP, \fB*\fP, \fB/\fP\&. Furthermore any numeric value can be converted
to a string using a specified rounding convention with a function \fBStr\fP,
i.e. \fBStr(MyValue.val,2)\fP\&.
.sp
Each numeric variable contains four values
.INDENT 0.0
.TP
.B \&.val
current value of the variable
.TP
.B \&.pval
previous value of the variable
.TP
.B \&.time
time elapsed between observing .pval and .val
.TP
.B \&.count
a number of time the pattern has been matched
during the last scan
.UNINDENT
.sp
By default, the value of the variable is the value of .val
.sp
String variables are prefixed with $, i.e. $StringVar
The following string operation are supported:
.TS
center;
|l|l|.
_
T{
Operation
T}	T{
Description
T}
_
T{
.INDENT 0.0
.IP \(bu 2
.UNINDENT
T}	T{
concatenate strings i.e. \fB"\(aqString\(aq+$Var"\fP\&.
T}
_
T{
Mid
T}	T{
extract substring i.e. \fBMid($Var,2,5)\fP
T}
_
T{
Extract
T}	T{
extract a regex pattern i.e.
\fBExtract($Var,\(aqFindThis: (GrabThat)\(aq)\fP
T}
_
T{
Time
T}	T{
get current time as a string, the first optional parameter specifies
the format, the second argument specifies a timezone
T}
_
T{
Df
T}	T{
get disk utilization data. You need to specify a mount point as an
argument.
T}
_
.TE
.SH CSS STYLE
.sp
SFWBar uses gtk+ widgets and can accept all css properties supported by
gtk+. SFWBar widgets correspond to gtk+ widgets as following:
.TS
center;
|l|l|l|.
_
T{
SFWBar widget
T}	T{
gtk+ widget
T}	T{
css class
T}
_
T{
label
T}	T{
GtkLabel
T}	T{
label
T}
_
T{
image
T}	T{
GtkImage
T}	T{
image
T}
_
T{
button
T}	T{
GtkButton
T}	T{
button
T}
_
T{
scale
T}	T{
GtkProgressBar
T}	T{
progressbar, trough, progress
T}
_
.TE
.sp
Taskbar and Pager use combinations of these widgets and can be themed
using gtk+ nested css convention, i.e. \fBgrid#taskbar button { ... }\fP
(this example assumes you assigned \fBstyle = taskbar\fP to your taskbar
widget).
.sp
In addition to standard gtk+ css properties SFWBar implements several
additional properties. These are:
.TS
center;
|l|l|.
_
T{
property
T}	T{
description
T}
_
T{
\-GtkWidget\-align
T}	T{
specify text alignment for a label, defined as a fraction.
(0 = left aligned, 1 = right aligned, 0.5 = centered)
T}
_
T{
\-GtkWidget\-direction
T}	T{
specify a direction for a widget.
For scale, it\(aqs a direction towards which scale grows.
For a grid, it\(aqs a direction in which a new widget is
position relative to the last placed widget.
For a window it\(aqs an edge along which the bar is positioned.
Possible values [top|bottom|left|right]
T}
_
T{
\-GtkWidget\-hexpand
T}	T{
specify if a widget should expand horizontally to occupy
available space. [true|false]
T}
_
T{
\-GtkWidget\-vexpand
T}	T{
as above, for vertical expansion.
T}
_
.TE
.sp
Taskbar and pager buttons are assigned the following styles
.TS
center;
|l|l|.
_
T{
style name
T}	T{
description
T}
_
T{
layout
T}	T{
Top level layout grid
T}
_
T{
taskbar_normal
T}	T{
taskbar button for a window
T}
_
T{
taskbar_active
T}	T{
taskbar button for currently focused window
T}
_
T{
pager_normal
T}	T{
pager button for a workspace
T}
_
T{
pager_visible
T}	T{
pager button for a visible workspace
T}
_
T{
pager_focused
T}	T{
pager button for a curently focused workspace
T}
_
T{
switcher
T}	T{
switcher window and top level grid
T}
_
T{
switcher_active
T}	T{
switcher active window representation
T}
_
T{
switcher_normal
T}	T{
switcher inactive window representation
T}
_
.TE
.sp
For example you can style top level grid using \fBgrid#layout { }\fP\&.
.SH COPYRIGHT
GPLv3+
.\" Generated by docutils manpage writer.
.
