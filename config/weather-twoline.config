# Parse yr.no weather forecast
scanner {
  "wget -O - \"https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=51.8711&lon=0.1587\"" {
    WthrTemp = "\"timeseries\".*\"air_temperature\":([0-9\\.]*)"
    WthrPrss.= "\"timeseries\".*\"air_pressure_at_sea_level\":([0-9\\.]*)"
    WthrWind = "\"timeseries\".*\"wind_speed\":([0-9\\.]*)"
    WthrCond = "\"timeseries\".*\"symbol_code\":\"([A-Za-z_]*)\""
  }
}

layout {
  Weather {
    type = grid
    style = frame
    css = "* { -GtkWidget-direction: bottom; }"
    children {
      Temp { 
        type = label
        freq = 300000
        css = "* { font: 18px Sans; font-weight: 700; min-width: 84px; padding-top: 2px; -GtkWidget-align: 0.5;}"
        value = "$WthrTemp.val"
      }
      Cond { 
        type = image
        freq = 300000
        css = "* { -GtkWidget-icon-size: 28;}"
        value = "'/usr/share/sfwbar/icons/weather/svg/'+$WthrCond+'.svg'"
      }
    }
  }
}
